import psycopg2

# Costumer registration funcion
def costumer_record(connection):
    # cursor
    with connection.cursor() as cursor:

        # Variables
        while True:
            ddd = input("DDD: ")
            if ddd.isdigit() and len(ddd) == 2:
                break
        while True:
            number = input("Número: ")
            if number.isdigit() and 8 <= len(number) <= 9:
                break

        phone = ddd + number 

        name = input("Nome: ")

        values = (name, phone)

        # SQL commands
        sql = "INSERT INTO clientes (name, phone) VALUES (%s, %s)"


        cursor.execute(sql, values)
        connection.commit()

        print("Cliente cadastrado com sucesso!")

# Main
 
try:
    # Server information and connection
    with psycopg2.connect(
        host = "clientessalao1-mr-b2e4.g.aivencloud.com",
        user = "avnadmin",
        password = "",
        database = "") as connection:

        costumer_record(connection)


except psycopg2.OperationalError as e:
    print("Erro na conexão com o banco de dados", e)

except psycopg2.Error as e:
    print("Erro ao executar o comando SQL!", e)




